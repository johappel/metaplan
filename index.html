<!DOCTYPE html>
<!-- saved from url=(0058)https://joachim-happel.makes.org/thimble/metaplan-methode_ -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  	<meta charset="utf-8">
    <title>Die Metaplan Methode digital</title>
    <!--
      Absicht:
          Digitale Umsetzung der Metaplan-Methode. 
        
      Nutzung:
          Klicke auf das Edit-Icon. Schreibe beliebige Thesen/Fragen/Probleme in das sich öffnedende Formular. 
          Schiebe die erzeugten Kärtchen zu Clustern mit dazu in Bezug stehenden Inhalten zusammen. 
          Anschließend erzeuge über jedem "Cluster" eine eigene Überschrift mit Hilfe weiterer Kärtchen.
          Du kannst dein Ergebnis auf deinem Comouter sichern, in dem du in deinem Browser auf Speichern klickst 
          oder die Tastenkombination [Strg]+[s] verwendest. Tastatur-Kürzel: 
		  [Strg]+[Return] Karte anlegen,
		  [ESC] Eingabeformular ausblenden ,
          [Strg]+[s] speichern.

      Hinweis:
          Beim Speichern werden die Inhalte (Kärtchen) local auf deinem Gerät gespeichert (nicht im Web!).
          Das Speichern funktioniert nur, wenn die Seite nicht in enem Frame geladen ist. 
          Falls du oben rechts "Rahmen entfernen" siehst, klicke diesen Link an!
          Du kannst die gespeicherte Seite genau wie ein Dokument aber jederzeit wieder ins Web hochladen und
          mit seinen Inhalten auch anderen zur Ansicht oder als Kopiervorlage zur Verfügung stellen.
  
      Todo:
          Die eingegebene Inhalte auch im Web unter einer eindeutigen ID speichern
          (Remote Storage)
  
      Autor: Joachim Happel (joachim.happel@gmail.com)
      Datum: 01.12.2013
      Lizenz: GNU (http://www.gnu.de//documents/gpl.de.html)
    -->
    <!--Diese Web-Applikation verwendent verschiedene open-source Bibliotheken -->
    <!-- jQuery -->
    <script src="./Die Metaplan Methode digital_files/jquery.min.js"></script>
    <!-- jQueri UI für die Drag'n Drop Funktionen -->
    <script src="./Die Metaplan Methode digital_files/jquery-ui.min.js"></script>
    <!-- jQuery UI Touch Punch zur Unterstützung von Touch-Screens -->
    <script src="./Die Metaplan Methode digital_files/jquery.ui.touch-punch.min.js"></script>
    <!-- Formatierungsregeln für die verwendeten HTML-Elemente -->
    <style>
      /*Farbverlauf für den Seiten-Hintergrund */
      body {
        background-image: radial-gradient(circle farthest-corner at center, #ddd 0%, #BABFC4 100%);
        max-width:4000px;
      }
      
      /*Link zur Anzeige der Seite ohne Thimbleumgebung*/
      a.help_link {
        color:#444; 
        font-family:Arial;
        float:right;
        text-decoration:none;
        font-size:80%;
        display: block;
        margin: 0 10px;
        background-image:  linear-gradient( 270deg, #c0c0c0, #CDD1D6  );
        border: px solid #ddd;
        border-radius: 5px;
        padding: 1px 8px;
        opacity: .5
      }
      a.help_link:hover {
        background-image: radial-gradient(circle , white , #CDD1D6 )
      }
      /*Die Metaplankärtchen*/
      #thesen p {
        width:300px;
        padding:0.5em;
        background-color:lightgoldenrodyellow;
        display: block;
        border-radius:5px;
        box-shadow: 2px 5px 5px silver;
        font-family:Arial;
        position:absolute;
        top: 0px;
        border: 1px solid orange;
		cursor: default;
      }
      
      /*Werkzeugleiste für der Kärtchen, default: ausgeblendet*/
      .toolbar{
        width:315px; 
        background-color:transparent;
        height:20px;
        border-radius:3px;
        cursor:pointer;
        display:none;
        font-weight:bold;
      }
      /*Schaltflächen der Werkzeugleiste*/
      .toolbar div:hover{
        border-bottom:0;
        border-top-width:2px;
        opacity:.6;
      }
      .toolbar .del, .toolbar .clr, .toolbar .edit{
        background-color:darkred; 
        color:white; 
        border-radius:5px; 
        padding:0 5px;
        float:right;
        margin-left:4px;
        min-width:10px;
        box-shadow: 5px 5px 18px silver;
		border: 1px solid #000;
      }
      .toolbar .del{
       background-color:darkred;
      }
      .toolbar .edit{
        margin-left:14px;
        background-color:#fff;
        width:16px;
        height:21px;
        overflow:hidden;
		border-color: #999;
      }
      .toolbar .edit.active{
        background-color:yellow;
        border:1px solid red;
	  }
      .toolbar .edit img{
        width:20px;
      }
      /*Kärtchen Farben + Farbwähler*/
      
      #thesen p.bold, .toolbar .clr.bold{
      	background-color:#fff;
        border:3px solid red;
        font-weight:bold;
      }
      .toolbar .clr.bold{
        color:#444;
        border:1px solid red;
      }
      #thesen p.yellow, .toolbar .clr.yellow{
        background-color:lightgoldenrodyellow; 
        border-color:darkred;
      }
      #thesen p.red, .toolbar .clr.red{
        background-color:#FFCCCC; 
        border-color:darkred;
      }
      #thesen p.green, .toolbar .clr.green{
        background-color:#CCFFCC; 
        border-color:darkgreen;
      }
      #thesen p.blue, .toolbar .clr.blue{
        background-color:#99CCFF; 
        border-color:darkblue;
      }
      
      /*Formular Rahmen*/
      .formula{
        background-color:lightgoldenrodyellow;
        border-radius:5px; 
        padding:5px 20px 5px 8px;
        box-shadow: 2px 5px 5px gray;
        opacity: .6;
        top:0 px;
        left:60px;
        width:300px;
        position:absolute;
        z-index:2147483646;
        margin-top:-220px;
        background-image: linear-gradient( 245deg, #ddd, #999 ); 
      }
      /*Eingabefelder und Schaltflächen des Eingabe - Formulars*/
      textarea, input {
        border-radius:5px;
        font-family:Arial;
        border: 1px solid navajowhite;
        padding:1px 5px;
        font-size:90%;
      }
      textarea {
        width:100%
      }
      button:hover,input:hover { 
        background-color:darkred; 
        color:#fff;
      }
      button:active,input:active { 
        background-color:red; color:white 
      }
      
           
      /*Knopf zum einblenden des Formulars*/
      #toggleFormBtn {
        border:0px; 
        position:absolute; 
        top:10px; 
        width:32px;
        z-index:2147483640;
        border-radius:5px;
        border: 3px solid transparent;
        box-shadow: 2px 5px 15px gray;
      }
      #toggleFormBtn:hover{
        background-color:silver; 
        border: 3px solid silver;
        border-radius:5px;
        box-shadow: 2px 2px 2px gray;
      }
      #toggleFormBtn:active{
        background-color:darkred; 
        border: 3px solid orange;
        border-radius:5px;
        box-shadow: -5px -5px 15px  white;
      }
      /*Hilfe*/
      #help {
        position:fixed;
        width:100%;
      }
      #help .help{
        font-family:Courier;
        border:0px;  
        width:300px; 
        top:3px;
        display:none;
        border-radius: 10px;
        padding:30px;
        box-shadow: 5px 5px 50px silver;
        margin-left : auto;
        margin-top: 5%;
        background-color:#9AFE2E;
        cursor:pointer;
        background-image: linear-gradient( 45deg, #ddd, #999 ); 
        opacity:.6;
      }
      #help .active{
        display:block;
      }
    </style>
    
    <!-- vorab definierte Javascript Variabeln und Funktionen -->
    <script>
      
      //globale Variablen für 
      	window.__Const_Top = 120;   
      
      	window.__z = 0; 	//aktueller z-index 
      	window.__t = 0;		//aktuelle top position von neuen Kärtchen
      	window.__l = 0;		//aktuelle left position von neuen Kärtchen
      	window.__lvl = 0; 	//hilfe level
      	window.__d = 0; 	//speichert ob der Nutzer schon kärtchen verschoben hat
      
      //Inititialisierung
      function init(){
        //vorhandene Inhalte Ziehbar machen
        makeDraggable(); 
        
        //Tips sollen beim ANklicken wieder verschwinden
        $('.help').on('click', function(){ 
          $(this).removeClass('active'); 
        }); 
        
        //Tastaturbefehle abfangen
        $( "#post" ).keypress(function(e) {
          //wenn <strg>+<return> gedrückt wird, Formular absenden
          if((e.keyCode == 13 || e.keyCode == 10) && e.ctrlKey){
            createEl($('#post'));          
          
            /*}else if(e.keyCode==27){//ESC => Formular ein-/ausblenden
            toggleForm();*/
          }
        });
        $(document).keypress(function(e) {
          if(e.keyCode==27){//ESC => Formular ein-/ausblenden
            toggleForm();
          }
        });
        //zum entwickeln der Hilfetexte folgende Zeile entkommentieren
        // localStorage.removeItem('metaplan-tips'); 
      }
      
      //Karte löschen
      function deleteEl(el){
        var post = $(el).parents('p.post');
        post.remove();
       
      }
      //Karte bearbeiten
      function editEl(el){
		
		var btn = $(el);
		var post = btn.parents('p.post');
		
		if(btn.hasClass('active')){
          
          $('.toolbar').remove();
          $('p').draggable( "enable" );
            
		   
		}else{
			btn.addClass('active')
			post.draggable( "disable" );
			post.find('span.content')[0].focus();
			post.css('cursor','auto');
			
		}
		
      }
      
      
      //Aussehen eine Karte Wechseln
      function colorEl(el){
        //ausgehend vom [Farb] Button den p-Tag eines Beitrags (post) ermitteln 
        var post = $(el).parents('p.post');
        
        //Layouteinstellungen zurücksetzen
        post.removeClass('bold');
        post.removeClass('red');
        post.removeClass('green');
        post.removeClass('blue');
        
        //die Klasse des gewählten Toolbar Button auf die Karte übertragen
        if($(el).hasClass('bold')){
            post.addClass('bold');
        }else if($(el).hasClass('red')){
         	post.addClass('red');
        }else if($(el).hasClass('green')){
        	post.addClass('green');
        }else if($(el).hasClass('blue')){
         	post.addClass('blue');
        }
        
        //Werkzeugleiste ausblenden
        if(!$('.toolbar').find('.edit').hasClass('active'))
		$('.toolbar').remove();
        
      }
      
      
      //Beim Klicken auf die Metaplan Karte, soll eine kleine Werkzeugleiste erscheinen
      function showToolbar(el, clickedElem){
		var tb;
		
		//die Toolbar existiert und wurde benutzt => nix unternehmen
		if(clickedElem && $(clickedElem).parents('.toolbar').length > 0){
			return;
		}	
		
		//Die Toolbar existier, es wurde auf das Kärtchen geklickt => ausblenden
        tb = $(el).find('.toolbar');
		if( tb.length>0 ) {
		   if(tb.find('.edit').hasClass('active')){
			   return;
		   }
		   tb.remove();
        }else{
        
			//Werkzeugleiste innerhalb des aktiven Elements(Karte) erstellen
			$(el).find('span.tbar').append( '<div class="toolbar">'
								+'<div class="del" title="Karte löschen">X</div>'
								+'<div class="edit" title="Inhalt bearbeiten">'
								+'<img src="http://upload.wikimedia.org/wikipedia/commons/4/4c/Edit_font_awesome.svg">'
								+'</div>'
								+'<div class="clr bold" title="Fett">F</div>'
								+'<div class="clr yellow">&nbsp;</div>'
								+'<div class="clr red">&nbsp;</div>'
								+'<div class="clr blue">&nbsp;</div>'
								+'<div class="clr green">&nbsp;</div>'
								+'</div>' );
			$('.del').on('click', function(){ deleteEl(this); } );
			$('.clr').on('click', function(){ colorEl(this); }  );
			$('.edit').on('click', function(){ editEl(this); }  );

			tb = $(el).find('.toolbar');
			tb.css({'position':'absolute',top:'-25px','left':'0px'});
			tb.show();
		}
      }
      
      
      
      //eine neue Karte nach absenden der Daten erstellen
      function createEl(el){
      	//Den Inhalt des Eingabefelds in der Variabel c speichern
          var c = $('#post').val().trim();
                   
        //Wenn der Inhalt nicht leer ist
          if(c){
            
            //z-index erhöhen damit das neue kärtchen ganz oben liegt
              window.__z ++; window.__l +=2;
            
            //top erhöhen, damit das Kärtchen etwas weiter unten liegt
              if(__t === 0) __t = __Const_Top;
              window.__t +=30;
            
            //eine unverwechselbar ID generieren  
              id = 'post-'+Math.round(Math.random() * 10000000);
            
            //Text-Umbrüche durch HTML <br> ersetzen
              c = c.replace( /\n/g,'<br>');  
            
            //HTML-Gerüst für die neue Karte 
            
              c = '<p id="'+id+'" class="post">'
              		+ '<span class="tbar"/>'	/* Platzhalter für Werkzeugleiste */
              		+ '<span class="content" contenteditable="true">' 
							+c+'</span>'		/* Der eingegebene Inhalt */
              	+ '</p>';
            
            //Am Ende des Platzhalters <div id="thesen"> anfügen
              $('#thesen').append( c );
            
            //Eingabefeld leeren und den Cursor-Focus wieder in das Feld setzen 
              //Damit man ohne Klick sofort das nächste Kärtchen schreiben kann
              $('#post').val('');
              $('#post')[0].focus();
            
            //das neu erzeugte Element positionieren
              var el = $('#'+id);
              el.css({'z-index':__z,'top': __t +'px','left': __l +'px'})
            
            //Drag&Drop funktionalität auch zu dem neu erzeugten Elemenet hinzufürgen

              el.draggable(); /* ab jetzt kann man ziehen */
              
              //Wenn der Nutzer anfängt, ein Kärtschen zu ziehen....
              el.on('dragstart', function(e){  
                 //Beim Ziehen eines Kärtchen sollte dieses immer ganz oben sein
            	 //dazu den z-index des aktuellen Kärtchens erhöhen
                  window.__t = __Const_Top;  
                  window.__z ++;
                  el.css('z-index', window.__z);
                  //alle Hilfen ausblenden
                  $('.toolbar').remove();
              });

              //Wenn der Nutzer das Kärtchen loslässt
              el.on('dragstop', function(e){  
                  //registrieren wenn der Nutzer ein Kärtchen verschoben hat
                  __d++;
                  //Hilfestellungen geben
                  showTip(); 
              });
            
            //Beim Klick auf das Kärtchen soll die Werkzeugleiste angezeigt werden
            //dazu dem onclick ereignis die Funktion "showToolbar" zuordnen 
              el.on('click', function(e){
				showToolbar(this, e.target);
                //el.draggable( "enable" );
              });
			  //Zum Editieren (Doppelklick) muss die Drag 'n Drop Funktion vorrübergehend abgeschaltet werden
              el.on('dblclick', function(){
               // el.draggable( "disable" );
              });
            //Hilfe-Tips zur Bedienung anzeigen
            showTip();
          }
      }
      
      //bereits gespeicherte Metaplankarten müssen beim Laden der Seite händelbar gemacht werden
      //siehe Erklärungen beim neu anlegen eines Kärtchens
      function makeDraggable(){ 
        $('#thesen p').draggable();
        $('#thesen p').on('click', function(){
          	showToolbar(this);
        });
        $('#thesen p').on('dblclick', function(){
          	$(this).draggable( "disable" );
        });
      }
      
      
      //Formularbox ein und ausblenden
      //dazu wird der oberer Rand des Formular in in den negativen Bereich (nach oben) geschoben
      
      function toggleForm(){
        
        //top position (margin-top) des Formulars ermitteln
        var pos = $('.formula').css('margin-top').replace('px','');
        
        //falls der wert bereits negativ ist auf 0 setzen (Formular ist dann sichtbar)
        //sonst um den Wert der Formularhöhe mal -1  nehmen 
        //(Formular ist oberhalb des sichtbaren Seiten-Bereiches)
        var t = (Number(pos) < 0)? 0 : ($('.formula').height() *-1);
        var o = (Number(pos) < 0)? 1 : 0;
        
        if(t>-1) $('#post').focus();
        
        //den Forgang animieren, so dass das Formular langsam nach oben oder unten schiebt
        $('.formula').animate({'margin-top': t+'px', opacity:o}, function(){
            //am Ende der Animation den Editierknopf ein- bzw. ausblenden
          //$('#toggleFormBtn').fadeToggle();
        });
        
        
        
      }
      
      //Nutzungslevel abhängige Hilfe, die angezeigt wird, 
      //wenn der User etwas erfolgreich ein neues Level erreicht hat
      //und inaktiv ist, wenn ein Nutzer das max Level erreicht hat
      
      function showTip(){
        if(localStorage.getItem('metaplan-tips')){
           return;
        }
        var max = $('.help').length -1;
        if (__lvl > max){
          return;
        }else if(__z == 1 ){  //erste Karte erzeugt
           _displayTip(1)
           __lvl ++ ;
        }else if(__z == 10 ){ //10 mal Karten erzeugt/verschoben
           __lvl ++ ;
          _displayTip(3)
        }else if(__d == 1 ) { //Karte zum ersten mal verschoben
           __lvl ++ ;
           _displayTip(4)
        }else if( __lvl == 3){ //weiterer Tip (wie man speichert)
           __lvl ++;
           _displayTip(2)
        }else if(__z == 20 && __lvl >3 ){ //noch ein Tip
          __lvl ++ ;
          _displayTip(6)
        }else if(__lvl == max){ //max Level erreichet
          __lvl++;
          _displayTip(5);
          //im Browser speichern, dass alle Tipps angezeigt wurden
          localStorage.setItem('metaplan-tips', 1); 
        }else if(__lvl > max){
          
        }
      }
      
      //Helfer Routine von showTip(): 
      //Aktive Tips ausblenden, (Klasse "active" löschen) 
      //danach den übergebenen Hilfetext mit der Nr (n) aktivieren 
      // (Klasse "active" hinzufügen)
      
      function _displayTip(n){
        $('.help').removeClass('active');
        $('#help-'+n).addClass('active');
      }
      
  	</script>
  <script>(function fixExternalLinks() {
              function pointToBlank(a) {
                var href = a.getAttribute("href");
                if (href && href.indexOf("://") > -1) {
                  // this is an external link.
                  if(!a.getAttribute("target")) {
                    a.setAttribute("target", "_blank");
                  }
                }
              }
              function fixLinks() {
                document.removeEventListener("DOMContentLoaded", fixLinks);
                var anchors = document.querySelectorAll("a");
                var asArray = Array.prototype.slice.call(anchors);
                asArray.forEach(function(a) {
                  pointToBlank(a);
                });
              }
              document.addEventListener("DOMContentLoaded", fixLinks);
            }())</script>

  
  <body style="zoom: 1;">
    
    <script>
      //falls der Moziolla Thimble Rahmen drum herum liegt, 
      //die Möglichkeit anbieten diesem zu entkommen
      if(window != parent){
        document.write('<a class="help_link" target="_top" '
                       +'title="ganzseitig nutzen (empfohlen)"'
                       +'href="'+location.href+'">'
                       +'Rahmen enfernen</a>');
      }
    </script>  
    <a href="javascript:void(0)" title="Kurzanleitung" class="help_link" onclick="_displayTip(0)">Hilfe</a>
    <div style="clear:both"></div>
    
    <!-- Formularrahmen -->
    <div class="formula"> 
      
      <!-- das Eingabe-Formular für die Karteninhalte -->
      <form>
        <!-- das Engabefeld -->
        <textarea id="post"></textarea>
        <br>
        <!-- Schaltflächen "Metaplan Karte erstellen" und "Ausblenden" -->
        <input type="button" value="Metaplan-Karte erzeugen" onclick="createEl(this)">
        <!--<input type="button" value="Ausblenden" onclick="toggleForm()">-->
      </form>
       <!-- Ende des Eingabe-Formulars -->
      
    </div>
    <!-- Ende des Formualrrahmen -->
    
    <!-- Ein  Bild-Knopf, über den das Eingabeformular eingeblendet werden kann -->
    <img id="toggleFormBtn" onclick="toggleForm()" src="./Die Metaplan Methode digital_files/add.png">
    
    <!-- in dieses Element werden alle Karten eingefügt -->
    <div id="thesen"></div>
    
    <!-- verborgender Bereich, in dem wir Hilfetexte speicheren 
		 es wird immer nur eines der folgenden Tipps angezeigt
	-->
    <div id="help">
       <div class="help" id="help-0">
		<b>Kurzanleitung</b><hr>
		  Klicke auf das Symbol. Schreibe beliebige Thesen/Fragen/Ideen in das sich öffnende Formular. 
          Schiebe die erzeugten Kärtchen zu inhaltlichen Clustern (Haufen) zusammen. 
          Setze Überschriften (dafür eventuell weitere Kärtchen erzeugen) über die Cluster.<br>
         <br> 
         <b>Tasten-Kürzel für PC-Nutzer:</b>
         <li>[ESC] Formular ein- /ausblenden </li>
         <li>[Strg]+[Return] Karte anlegen,</li>
          <li>[Strg]+[s] Alles speichern.</li>
      </div>
      <div class="help" id="help-1">
		<b>Hilfen zum Einstieg</b><hr>
		<b>Spitze!</b><br>
        Du hast herausgefunden, wie man neue Karten erzeugt.<br>
        Erstelle noch mehr und ordne sie dann per Drag'n Drop 
        auf dem Bildschirm an.
      </div>
      <div class="help" id="help-3">
		<b>Hilfen zum Einstieg</b><hr>
		Wenn du auf eine Karte klickst, erscheint 
        eine kleine <b>Werkzeugleiste</b>.<br> 
        Wenn du auf das <b>[F]</b> klickst, wird der Inhalt Fett dargestellt 
        und rot umrandet. Genau richtig für Überschriften.
      </div>
      <div class="help" id="help-2">
		<b>Hilfen zum Einstieg</b><hr>
		Du kannst die "Karten" 
        auf deinem Gerät <b>speichern</b>, 
        indem du in deinem Browsemenü auf "Speichern unter" klickst. 
        So gespeicherte Datei lassen sich <b>offline weiterbearbeiten</b> 
        und mit allen Inhalten wieder ins Web hochladen.
	  </div>
      <div class="help" id="help-4">
		<b>Hilfen zum Einstieg</b><hr>
		<b>Hervorragend!</b>Nun kannst du die Mataplan-Karten 
        nach Inhalten geordnet in Haufen zusammen schieben (Clustern) 
	  </div>
      <div class="help" id="help-5">
		<b>Glückwunsch!</b><hr>
        Du hast alle Funktionen zu dieser Methode kennen gelernt.<br>
        Viel Erfolg beim Clustern und Sturkturieren!
	  </div>
      <div class="help" id="help-6">
		<b>Hilfen zum Einstieg</b><hr>
        So kannst in einer Karte auch <b>nachträglich den Inhalt bearbeiten</b>:
        Klicke auf in der Werkzeugleiste 
        <img src="./Die Metaplan Methode digital_files/Edit_font_awesome.svg" width="20px">. 
		<br>Den Bearbeitungsvorgang beendest du auf die gleiche Weise. 
	  </div>
    </div>
    <!-- Ende des Hilfebereichs -->
    
    <script>
      //wird einmalig ausgeführt, wenn alle Inhalte der Seite geladen sind
      init();
    </script>
  

